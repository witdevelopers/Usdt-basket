<div class="tree-node-wrapper">

  <!-- Back Button -->
  <button *ngIf="treeHistory.length > 0" (click)="goBack()" class="back-button" aria-label="Go back to previous tree">
    ‚Üê Back
  </button>

  <!-- Root Node -->
 <div
  class="node"
  (click)="onNodeClick(node)"
  (contextmenu)="toggleNodeDetails(node?.member?.memId); $event.preventDefault();"
  title="Left Click to Load Subtree | Right Click to Toggle Details"
  tabindex="0"
  role="button"
  [attr.aria-pressed]="isExpanded(node?.member?.memId)"
>
    <img src="assets/binary-tree/green.png" alt="Node Icon" class="node-image" />

    <div class="node-info-wrapper">
      <div class="node-info">
        {{ formatUserId(node?.member?.userID) }}
      </div>

      <div class="full-details" *ngIf="isExpanded(node?.member?.memId)">
        <div class="table-responsive" *ngIf="node?.member?.memIdDetails">
          <div class="card-view">
            <div class="detail-card" *ngIf="node?.member?.memIdDetails as details">
              <div class="card-field"><strong>MemID:</strong> {{ parseMemIdDetailsStr(details)?.memid }}</div>
              <div class="card-field"><strong>User ID:</strong> {{ parseMemIdDetailsStr(details)?.userID }}</div>
              <div class="card-field"><strong>Sponsor:</strong> {{ parseMemIdDetailsStr(details)?.sponsor }}</div>
              <div class="card-field"><strong>Status:</strong> {{ parseMemIdDetailsStr(details)?.status }}</div>
              <div class="card-field"><strong>Time:</strong> {{ parseMemIdDetailsStr(details)?.time }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Child Nodes -->
  <table width="100%" class="children-table">
    <tr>
      <td class="child-wrapper" *ngIf="node?.left">
        <app-tree-node [node]="node.left"></app-tree-node>
      </td>

      <td class="child-wrapper" *ngIf="node?.right">
        <app-tree-node [node]="node.right"></app-tree-node>
      </td>
    </tr>
  </table>
</div>
